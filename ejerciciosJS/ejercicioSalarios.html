<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cálculo de Salarios</title>
</head>

<body>
    <!--
    Desarrolla una aplicación que permita calcular los salarios mensuales 
    de los trabajadores de una empresa a partir de los siguientes datos:

    a. Número de horas trabajadas.
    b. Turno realizado: Mañanas (m), Tardes (t) o Noches (n).

    Para el cálculo del salario bruto se tendrá en cuenta que el turno de mañana
    se paga a 15€/hora, el de tarde se paga a 17 €/hora y el turno de noche se 
    paga 20 €/ hora.

    Para el cálculo del salario neto se realizan determinados 
    descuentos destinados al pago de impuestos de la siguiente forma:

    -Si el salario bruto es menor de 600 € el descuento es del 8%.
    -Si el salario bruto está entre 600 € y 1000 € el descuento es del 10%.
    -Si el salario bruto es mayor de 1000 € el descuento es del 12%.

    Se desea calcular el salario neto de cada trabajador. Para ello la aplicación 
    irá pidiendo uno a uno los trabajadores hasta que el usuario indique lo 
    contrario.

    Para cada trabajador se mostrará su salario neto.
    
    Antes de finalizar la aplicación mostrará el importe total de salarios 
    abonados. El script se escribirá usando tantas funciones como sea posible
    con el fin de poder reutilizar la máxima cantidad de código en un futuro.
    -->
    <h1>Cálculo de Salarios</h1>
    <div id="resultados"></div>

    <script>
        // Constantes con las tarifas por hora según turno
        const TARIFAS = {
            'm': 15, // mañana
            't': 17, // tarde
            'n': 20  // noche
        }

        // Función para calcular el salario bruto
        const calcularSalarioBruto = (horas, turno) => {
            // Devuelve el salario bruto según las horas y el turno
            return horas * TARIFAS[turno];
        }

        // Función para calcular el descuento según el salario bruto
        const calcularDescuento = (salarioBruto) => {
            // Devuelve el porcentaje de descuento según el salario bruto
            if (salarioBruto < 600) return 0.08;
            if (salarioBruto <= 1000) return 0.10;
            return 0.12;
        }

        // Función para calcular el salario neto
        const calcularSalarioNeto = (salarioBruto) => {
            // Aplica el descuento al salario bruto y devuelve el salario neto
            const descuento = calcularDescuento(salarioBruto);
            return salarioBruto * (1 - descuento);
        }

        // Función para formatear moneda
        const formatearMoneda = (cantidad) => {
            // Devuelve la cantidad formateada como moneda (euros)
            return `${cantidad.toFixed(2)} €`;
        }

        // Función principal que gestiona el proceso completo
        const gestionarSalarios = () => {
            // Variable para controlar el bucle y acumular el total de salarios netos
            let continuar = true;
            let totalSalariosNetos = 0;
            // Cogemos el div donde mostraremos los resultados
            const resultadosDiv = document.getElementById("resultados");
            // Limpiamos el contenido previo
            resultadosDiv.innerHTML = "";

            while (continuar) {
                // Solicitar datos al usuario
                const horas = parseInt(prompt("Introduce el número de horas trabajadas:"));
                const turno = prompt("Introduce el turno (m: mañana, t: tarde, n: noche):").toLowerCase();

                // Validar datos de entrada
                if (isNaN(horas) || horas <= 0 || !['m', 't', 'n'].includes(turno)) {
                    alert("Datos inválidos. Por favor, introduce valores correctos.");
                    continue;
                }

                // Calcular salarios
                const salarioBruto = calcularSalarioBruto(horas, turno);
                const salarioNeto = calcularSalarioNeto(salarioBruto);
                totalSalariosNetos += salarioNeto;

                // Mostrar resultado para este trabajador
                const resultadoTrabajador = document.createElement("p");
                resultadoTrabajador.textContent = `Salario neto: ${formatearMoneda(salarioNeto)}`;
                resultadosDiv.appendChild(resultadoTrabajador);

                // Preguntar si desea continuar
                continuar = confirm("¿Deseas calcular el salario de otro trabajador?");
            }

            // Mostrar el total de salarios netos
            const totalElement = document.createElement("h3");
            totalElement.textContent = `Total de salarios netos abonados: ${formatearMoneda(totalSalariosNetos)}`;
            resultadosDiv.appendChild(totalElement);
        }

        // Iniciar la aplicación
        gestionarSalarios()
    </script>
</body>

</html>